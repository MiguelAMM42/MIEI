<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="" lang=""><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><style class="darkreader darkreader--fallback" media="screen"></style><style class="darkreader darkreader--text" media="screen"></style><style class="darkreader darkreader--invert" media="screen">.jfk-bubble, embed[type="application/pdf"] {
    filter: invert(100%) hue-rotate(180deg) brightness(105%) contrast(80%) !important;
}</style><style class="darkreader darkreader--inline" media="screen">[data-darkreader-inline-bgcolor] {
  background-color: var(--darkreader-inline-bgcolor) !important;
}
[data-darkreader-inline-bgimage] {
  background-image: var(--darkreader-inline-bgimage) !important;
}
[data-darkreader-inline-border] {
  border-color: var(--darkreader-inline-border) !important;
}
[data-darkreader-inline-border-bottom] {
  border-bottom-color: var(--darkreader-inline-border-bottom) !important;
}
[data-darkreader-inline-border-left] {
  border-left-color: var(--darkreader-inline-border-left) !important;
}
[data-darkreader-inline-border-right] {
  border-right-color: var(--darkreader-inline-border-right) !important;
}
[data-darkreader-inline-border-top] {
  border-top-color: var(--darkreader-inline-border-top) !important;
}
[data-darkreader-inline-boxshadow] {
  box-shadow: var(--darkreader-inline-boxshadow) !important;
}
[data-darkreader-inline-color] {
  color: var(--darkreader-inline-color) !important;
}
[data-darkreader-inline-fill] {
  fill: var(--darkreader-inline-fill) !important;
}
[data-darkreader-inline-stroke] {
  stroke: var(--darkreader-inline-stroke) !important;
}
[data-darkreader-inline-outline] {
  outline-color: var(--darkreader-inline-outline) !important;
}</style><style class="darkreader darkreader--user-agent" media="screen">html {
    background-color: #232526 !important;
}
html, body, input, textarea, select, button {
    background-color: #232526;
}
html, body, input, textarea, select, button {
    border-color: #5f5f5f;
    color: #e8e6e3;
}
a {
    color: #3d96fe;
}
table {
    border-color: #555555;
}
::placeholder {
    color: #bdb8ae;
}
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
    background-color: #5c630d !important;
    color: #e8e6e3 !important;
}</style>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="Laboratório de Algoritmia I">
  <meta name="author" content="Laboratórios de Informática II">
  <meta name="author" content="Ano letivo 2019/20">
  <title>Guião da aula 6</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style><style class="darkreader darkreader--sync" media="screen"></style><style class="darkreader darkreader--override" media="screen">.vimvixen-hint {
    background-color: #815b00 !important;
    border-color: #d9b31f !important;
    color: #f2e8ca !important;
}
::placeholder {
    opacity: 0.5 !important;
}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Guião da aula 6</h1>
<p class="author">Laboratório de Algoritmia I</p>
<p class="author">Laboratórios de Informática II</p>
<p class="author">Ano letivo 2019/20</p>
<p class="date">Last Update: 03/20/2020 10:25:33</p>
</header>
<h1 id="tarefas-a-executar-esta-semana">Tarefas a executar esta semana</h1>
<p>As seguintes tarefas devem ser entregues (através do github) até ao dia 20 de Março às 20h00:</p>
<ul>
<li>Tornar o repositório Github <strong>privado</strong></li>
<li>Documentação do código</li>
<li>Criação de um prompt</li>
<li>Adicionar mais comandos ao interpretador</li>
<li>Implementação da jogada</li>
<li>Validação das jogadas</li>
<li>Deteção do fim de jogo</li>
</ul>
<h1 id="repositório-privado">Repositório privado</h1>
<p>A primeira tarefa desta semana é <strong>tornar o repositório Github privado</strong>. Para isso deverão fazer os seguintes passos:</p>
<ul>
<li>Ir aos <em>Settings</em> e ir à opção make this repository private</li>
<li>Convidar o utilizador <strong>equipadocente-la1li21920</strong></li>
<li>Mudar o nome do repositório para <code>&lt;UC&gt;&lt;Turno&gt;&lt;Nº de grupo&gt;</code></li>
</ul>
<p>Por exemplo, nomes de repositórios válidos são <code>LA1PL1G5</code> ou <code>LI2PL7G9</code>.</p>
<h1 id="slack">Slack</h1>
<p>Vamos criar um conjunto de regras para o <strong>Slack</strong></p>
<ul>
<li>Juntar-se ao <a href="https://join.slack.com/t/departamentod-l0u3255/shared_invite/zt-cm6rmsky-wUTf2o1el7cn8K8k8q50XA">Slack</a></li>
<li>Cada grupo deve criar um canal <strong>privado</strong> com o nome <code>&lt;UC&gt;PL&lt;Nº  do Turno&gt;g&lt;Nº de grupo com dois algarismos&gt;</code></li>
<li>Cada grupo deve colocar na descrição do canal o url do repositório <strong>Github</strong></li>
<li>Cada grupo deve, no seu canal privado, mencionar o docente para que 
este receba um email quando lhe quiserem perguntar algo diretamente, 
como por exemplo terem colocado uma nova funcionalidade no github que 
querem que o docente veja.</li>
<li>Colocar na descrição do canal do <strong>Slack</strong> o link do <strong>Github</strong></li>
</ul>
<p>Eis uma lista dos docentes:</p>
<dl>
<dt>Rui Mendes</dt>
<dd><span class="citation" data-cites="Rui">@Rui</span> Mendes
</dd>
<dt>Vítor Alves</dt>
<dd><span class="citation" data-cites="Victor">@Victor</span> Alves
</dd>
<dt>Filipa Ferraz</dt>
<dd><span class="citation" data-cites="Filipa">@Filipa</span> Ferraz
</dd>
<dt>Nuno Oliveira</dt>
<dd><span class="citation" data-cites="NunoO">@NunoO</span>
</dd>
<dt>Francisco Marcondes</dt>
<dd><span class="citation" data-cites="Francisco">@Francisco</span> Marcondes
</dd>
</dl>
<h1 id="documentação-do-código">Documentação do código</h1>
<p>Pretende-se que crie a documentação do código. Essa documentação 
poderá ser obtida através do comando Doxygen. Para obter a documentação:</p>
<ol type="1">
<li>Para a instalação:
<ol type="1">
<li>Instalar o doxygen</li>
<li>Ir para a pasta do código e correr <code>doxygen -g</code> para gerar o ficheiro de configuração</li>
<li>Editar o ficheiro de configuração</li>
</ol></li>
<li>Correr o comando <code>doxygen</code> para gerar a documentação.</li>
</ol>
<p>De cada vez que se corre o comando <code>doxygen</code>, são geradas duas pastas: <code>html</code> e <code>latex</code>. Entra-se na pasta <code>html</code> e abre-se o ficheiro <code>index.html</code>.</p>
<p>Segue-se um exemplo de um ficheiro dados.h com os comentários para obter a documentação:</p>
<pre><code>/**
@file dados.h
Definição do estado e das funções que o manipulam
*/

#ifndef ___DADOS_H___
#define  ___DADOS_H___
#define BUF_SIZE 1024

/**
\brief Tipo de dados para os erros
*/
typedef enum {
  OK, 
  COORDENADA_INVALIDA, 
  JOGADA_INVALIDA, 
  ERRO_LER_TAB,
  ERRO_ABRIR_FICHEIRO,
} ERROS;

/**
\brief Tipo de dados para a casa
*/
typedef enum {
  UM = '1',
  DOIS = '2',
  VAZIO = '.',
  BRANCA = '*',
  PRETA = '#'
} CASA;

/**
\brief Tipo de dados para as coordenadas
*/
typedef struct {
    int coluna;
    int linha;
} COORDENADA;

/**
\brief Tipo de dados para a jogada
*/
typedef struct {
    COORDENADA jogador1;
    COORDENADA jogador2;
} JOGADA;

/**
\brief Tipo de dados para as jogadas
*/
typedef JOGADA JOGADAS[32];

/**
\brief Tipo de dados para o estado
*/

typedef struct {
  /** O tabuleiro */
    CASA tab[8][8];
  /** As jogadas */
    JOGADAS jogadas;
  /** O número das jogadas, usado no prompt */
    int num_jogadas;
  /** O jogador atual */
    int jogador_atual;
  /** O nº de comando, usado no prompt */
  int num_comando;
  /** A coordenada da última jogada */
  COORDENADA ultima_jogada;
} ESTADO;

/**
\brief Muda o valor de uma casa
@param e Apontador para o estado
@param c A coordenada
@param V O novo valor para a casa
*/
void set_casa(ESTADO *e, COORDENADA c, CASA V);
/**
\brief Devolve o valor de uma casa
@param e Apontador para o estado
@param c A coordenada
@returns O valor da casa
*/
CASA get_casa(ESTADO *e, COORDENADA c);

/**
\brief Inicializa o valor do estado
Esta função inicializa o valor do estado. Isso implica o tabuleiro ser colocado na posição inicial e todos os campos do estado estarem com o valor por omissão.
@returns O novo estado
*/
ESTADO *inicializar_estado();

#endif</code></pre>
<h1 id="criação-de-um-prompt">Criação de um prompt</h1>
<p>Um prompt deve permitir ao utilizador saber o estado do jogo, quantos
 comados foram introduzidos, quem é o jogador atual e qual é a jogada 
atual. No exemplo dado abaixo, o implementador optou por colocar</p>
<pre><code># &lt;número de comandos&gt; PL&lt;1 ou 2 conforme o jogador&gt; (&lt;número da jogada atual&gt;)&gt;</code></pre>
<p>Segue-se um exemplo de um extrato da interação com o jogo:</p>
<pre><code>8 .......2
7 ........
6 ........
5 ....*...
4 ........
3 ........
2 ........
1 1.......
  abcdefgh
# 01 PL1 (0)&gt; d4
8 .......2
7 ........
6 ........
5 ....#...
4 ...*....
3 ........
2 ........
1 1.......
  abcdefgh
# 02 PL2 (1)&gt; d5
8 .......2
7 ........
6 ........
5 ...*#...
4 ...#....
3 ........
2 ........
1 1.......
  abcdefgh
# 03 PL1 (1)&gt; c5
8 .......2
7 ........
6 ........
5 ..*##...
4 ...#....
3 ........
2 ........
1 1.......
  abcdefgh
# 04 PL2 (2)&gt; c6
8 .......2
7 ........
6 ..*.....
5 ..###...
4 ...#....
3 ........
2 ........
1 1.......
  abcdefgh
# 05 PL1 (2)&gt; b5
8 .......2
7 ........
6 ..#.....
5 .*###...
4 ...#....
3 ........
2 ........
1 1.......
  abcdefgh
# 06 PL2 (3)&gt;</code></pre>
<p>Não precisam de seguir exatamente o que se optou aqui mas pretende-se
 que o prompt seja informativo e tenha, no mímino, a indicação do 
jogador e do número da jogada.</p>
<h1 id="implementação-da-jogada">Implementação da jogada</h1>
<p>Pretende-se que implemente o resto das funcionalidades da jogada, nomeadamente:</p>
<ul>
<li>Verificar se a jogada é válida:
<ul>
<li>Se a casa onde se pretende jogar está vazia</li>
<li>Se é vizinha da peça branca</li>
</ul></li>
<li>Colocar uma peça negra na casa atual da peça branca</li>
<li>Colocar a peça branca na casa atual</li>
<li>Detetar se o jogo acabou e congratular o jogador correspondente</li>
<li>O jogo acaba se:
<ul>
<li>A casa branca se encontra no canto inferior esquerdo: ganha <strong>o jogador 1</strong></li>
<li>A casa branca se encontra no canto superior direito: ganha <strong>o jogador 2</strong></li>
<li>A jogada atual colocou a branca num sítio onde o próximo jogador não consegue jogar porque <strong>não há nenhuma casa vizinha livre</strong>: o jogador que colocou a branca ganhou</li>
</ul></li>
</ul>
<h1 id="adicionar-comandos-ao-interpretador">Adicionar comandos ao interpretador</h1>
<p>Pretende-se que adicione mais comandos ao intepretador:</p>
<ul>
<li>Comando Q</li>
<li>Comando gr</li>
<li>Comando ler</li>
</ul>
<p>Tanto o comando <strong>gr</strong> como o <strong>ler</strong> recebem um argumento: o nome do ficheiro.</p>
<p>Os comandos <strong>gr</strong> e <strong>ler</strong> não precisam 
de ser implementados na totalidade. Por agora pede-se que o programa só 
crie o ficheiro com o tabuleiro. A informação relativa às jogadas pode 
ficar para depois.</p>
<p>Eis as system calls necessárias para criar um ficheiro:</p>
<ul>
<li>fopen</li>
<li>fclose</li>
<li>fgets</li>
<li>fscanf</li>
<li>fprintf</li>
<li>fputc</li>
</ul>
<p>Relembro que escrever:</p>
<pre><code>printf("ola\n");</code></pre>
<p>É o mesmo que escrever:</p>
<pre><code>fprintf(stdout, "ola\n");</code></pre>
<p>E por isso pretende-se que reutilizem a função que imprime o 
tabuleiro para o comando que grava o tabuleiro. Tal implica algo tão 
simples como substituir printf por fprintf por exemplo. Segue-se um 
tutorial para <a href="https://www.cprogramming.com/tutorial/cfileio.html">ficheiros</a>, mas existem outros.</p>


</body></html>